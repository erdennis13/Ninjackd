<div class="panel panel-default">
	<div class="panel-body">

		<h1>Here's your completed workout!</h1>

		<% @subscriptions = current_user.subscriptions.where(:complete => true).order("created_at DESC").paginate(:page => params[:page], :per_page => 10) %>

		<table class="table">
			<thead>
				<tr>
		            <th>Name</th>
		            <th>Category</th>
		            <th>Description</th>
		            <th>Duration (min)</th>
		            <th>Elapsed Time (min)</th>
				<tr>
			</thead>

			<% @subscriptions.each do |this| %>
				<% if this.complete? %>
					<tr>
						<td><%= link_to this.workout.name , detailedHistory_path(subscription_id: this.id), class: "workoutLink" %></td>
						<td><%= this.workout.category %></td>
						<td><%= this.workout.description %></td>
						<td><%= this.workout.duration %></td>
						<% unless this.finish_time.blank? or this.start_time.blank? %>
							<td><%= elapsed_time = (((this.finish_time - this.start_time))/60).round(0) %> min</td>
						<% else %>
							<td></td>
						<% end %>
					</tr>
				<% end %>
			<% end %>

		</table>
	</div>
</div>

<div class="center">
  <%= will_paginate @subscriptions, renderer: BootstrapPagination::Rails %>
</div>